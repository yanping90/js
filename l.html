<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PHP lxr</title>
  <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <style>
    html, body {
      font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace;
    }

    .link {
      cursor: pointer;
    }
  </style>
  <script src="G.js"></script>
</head>

<body class="bg-warning">
<div class="container">
  <table class="table table-striped table-condensed table-hover">
    <thead>
    <tr>
      <th>Item</th>
      <th>Usage</th>
      <th>Description</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>
</body>
<script>
  (function (data) {
    var tBody = $("tbody")[0];

    for (var i in data) {
      tBody.append(
        document.createElement("tr")
          .append($("<td>").html(data[i].item).addClass("link"))
          .append($("<td>").html(data[i].usage).addClass("link"))
          .append($("<td>").html(data[i].desc))
      );
    }

    tBody.addEventListener("click", function (e) {
      // f:dirname      q="ZEND_FUNCTION+dirname"
      var kw;
      var type = "defs";
      if (e.target.hasClass("link")) {
        kw = e.target.html().replace(/\(.*$/, "");
        if (kw.beginWith("f:")) {
          type = "q";
          kw = '"PHP_FUNCTION+' + kw.substr(2) + '"';
        } else if (kw.beginWith("z:")) {
          type = "q";
          kw = '"ZEND_FUNCTION+' + kw.substr(2) + '"';
        }
        location.href = "http://lxr.php.net/search?" + type + "=" + kw + "&project=PHP-7.0";
      }
    }, false);

  })([
    {
      item: "ZEND_PARSE_PARAMETERS_START(min_num_args, max_num_args)",
      usage: "explode",
      desc: "参数解析"
    }
    ,
    {
      item: "ZSTR_VAL(zend_string)",
      usage: "f:dirname",
      desc: "获取字符值"
    },
    {
      item: "ZSTR_VAL(zend_string)",
      usage: "z:dirname",
      desc: ""
    }
  ]);
</script>
</html>